<template>
  <div class="main-body main-padding">
    <el-card
      class="box-card"
      style="width:100%; height:auto;  border:none;"
      shadow="none"
    >
      <bread-crumb></bread-crumb>

      <div style="margin-left:30px; margin:right:30px;">
        <el-form
          style=" margin:100px;"
          label-position="left"
          :model="ruleForm"
          :rules="rules"
          ref="ruleForm"
          label-width="120px"
        >
          <div
            style="display: flex;
  justify-content: center;"
          >
            <h3
              class="mt-1 mb-3"
              style="font-weight:600; background-color:#fbe997"
            >
              ì…ì–‘ì€ "í‰ìƒ, ëê¹Œì§€" ì±…ì„ì§€ëŠ” ì¼ì…ë‹ˆë‹¤.
            </h3>
          </div>
          <div
            style=" margin-bottom:70px; display: flex;
  justify-content: center;"
          >
            <h6>
              ë°˜ë ¤ë™ë¬¼ì€ ë¬¼ê±´ì´ ì•„ë‹Œ ìƒëª…ì´ê³  ê°€ì¡±ì…ë‹ˆë‹¤. ì•„ì´ë“¤ì´ ë‘ ë²ˆ
              ìƒì²˜ë°›ì§€ ì•Šë„ë¡ ì‹ ì¤‘í•˜ê²Œ ê³ ë¯¼í•˜ê³  ì±…ì„ê°ì„ ê°€ì ¸ì£¼ì„¸ìš”.
            </h6>
          </div>

          <h4 class="mt-1 mb-3" style="font-weight:600">
            ğŸš¥ ì…ì–‘ ì ˆì°¨ ë° ìœ ì˜ì‚¬í•­
          </h4>
          <div class="box" style="margin-bottom:60px;">
            <h5 style="font-weight:600">1. ì…ì–‘ ì‹ ì²­ì„œ ì‘ì„±</h5>
            <div style="margin-left:20px; margin-bottom:40px;">
              <h6>
                ì…ì–‘ì„ ì›í•˜ì‹œëŠ” ë¶„ì€ [ì…ì–‘ ì‹ ì²­] ë²„íŠ¼ì„ ëˆ„ë¥´ì‹œê³ , ì…ì–‘ì‹ ì²­ì„œë¥¼
                ì‘ì„±í•´ ì£¼ì„¸ìš”.
              </h6>
              <h6>
                ğŸš«
                <b>ì‘ì„± ë‚´ìš©ì´ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ê²½ìš° ì…ì–‘ì´ ì·¨ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</b>
              </h6>
            </div>

            <h5 style="font-weight:600">2. ì±„íŒ… ë° í™”ìƒìƒë‹´</h5>
            <div style="margin-left:20px; margin-bottom:40px;">
              <h6>
                ì±„íŒ… ë° í™”ìƒìƒë‹´ ì„ë³´ìê°€ ì‹ ì²­ì„œ ê²€í†  ë° ìŠ¹ì¸ í›„ ê°œë³„ ë©´ë‹´ì´
                ì‹œì‘ë©ë‹ˆë‹¤.
              </h6>
              <h6>
                ì…ì–‘ ì‹ ì²­ìëŠ” ì±„íŒ… ë° í™”ìƒíšŒì˜ë¥¼ í†µí•´ ê°œë³„ ë©´ë‹´ì„ ì§„í–‰í•˜ê²Œ
                ë©ë‹ˆë‹¤.
              </h6>
              <h6>
                ì´ ìƒë‹´ ê²°ê³¼ë¡œ ìµœì¢… ì…ì–‘ì´ ê²°ì •ë©ë‹ˆë‹¤.
              </h6>
            </div>

            <h5 style="font-weight:600">3. ì…ì–‘ë™ì˜ì„œ ì‘ì„± ë° ì…ì–‘ í™•ì •</h5>
            <div style="margin-left:20px;">
              <h6>
                ì…ì–‘ì´ ê²°ì •ë˜ë©´ ëŒ€ë©´ ë§Œë‚¨ì„ í†µí•´ ì…ì–‘ ë™ì˜ì„œ ì‘ì„± í›„ ëª¨ë“  ì ˆì°¨ê°€
                ë§ˆë¬´ë¦¬ ë©ë‹ˆë‹¤.
              </h6>
              <h6>
                ğŸš«
                <b
                  >ë‹¨, ë°©ë¬¸ì‹œ ì‚¬ì‹¤ê³¼ ë‹¤ë¥´ê±°ë‚˜ ì…ì–‘ìê²©ì´ ë¶€ì¡±í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´
                  ì…ì–‘ì´ ì·¨ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</b
                >
              </h6>
            </div>
          </div>

          <h4 class="mt-1 mb-3" style="font-weight:600">
            ğŸš¥ ì…ì–‘ ìê²© í™•ì¸
          </h4>
          <div class="box" style=" margin-bottom:60px;">
            <h5 style="font-weight:600;">
              ë‹¤ìŒì˜ ê²½ìš°ì—ëŠ” ì…ì–‘ì´ ì–´ë µìŠµë‹ˆë‹¤.
            </h5>
            <div style="margin-left:20px; margin-top:20px;">
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                ê°€ì •ìœ¼ë¡œì˜ ì…ì–‘ì´ ì•„ë‹Œ ê²½ìš° ( ì˜ˆ : ê³µì¥, íšŒì‚¬, ì‹ë‹¹ ë“± )
              </h6>
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                ë¯¸ì„±ë…„ìì˜ ì…ì–‘ ì‹ ì²­
              </h6>
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                ê°€ì¡± êµ¬ì„±ì› ì „ì²´ì˜ ë™ì˜ë¥¼ ì–»ì§€ ì•Šì€ ê²½ìš°
              </h6>
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                ê°€ì¡± êµ¬ì„±ì› ì¤‘ ë™ë¬¼ì— ëŒ€í•œ ì•Œë ˆë¥´ê¸°ë¡œ ì¹˜ë£Œë¥¼ ë°›ê³  ìˆê±°ë‚˜
                ë™ë¬¼ì—ê²Œ ìœ„í•´ê°€ ë  ìˆ˜ ìˆëŠ” ì •ì‹  ì§ˆí™˜ì„ ê°€ì§„ ê²½ìš°
              </h6>
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                ë¯¸ì·¨í•™ ì•„ë™ì˜ ìë…€ê°€ 3ëª… ì´ìƒì¸ ê²½ìš°
              </h6>
              <h6>
                <font-awesome-icon :icon="['fas', 'check-circle']" />
                70ì„¸ ì´ìƒ í˜¼ì ê±°ì£¼í•˜ê³  ìˆëŠ” ê²½ìš°
              </h6>
            </div>
          </div>

          <el-divider style="margin-bottom:60px;" />

          <h4 class="mt-1 mb-3" style="font-weight:600;">
            âœ ì…ì–‘ ì‹ ì²­ì„œ ì‘ì„±
          </h4>

          <el-row class="mt-3 mb-3">
            <el-col :span="12">
              <el-form-item label="ê³µê³  ì œëª©" prop="title" style="width:95%">
                <el-input v-model="ruleForm.title" disabled></el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item
                label="ê°•ì•„ì§€ ì´ë¦„"
                prop="dogName"
                style="width:100%"
              >
                <el-input v-model="ruleForm.dogName" disabled></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row class="mt-3 mb-3">
            <el-col :span="12">
              <el-form-item label="ì´ë¦„" prop="name" style="width:95%">
                <el-input v-model="ruleForm.name"></el-input>
              </el-form-item>
            </el-col>
            <el-col :span="12">
              <el-form-item label="ì´ë©”ì¼ì£¼ì†Œ" prop="email" style="width:100%">
                <el-input v-model="ruleForm.email"></el-input>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row class="mt-3 mb-3">
            <el-col :span="8">
              <el-form-item label="ì „í™”ë²ˆí˜¸" prop="age" style="width:100%">
                <el-input-number
                  v-model="ruleForm.age"
                  :step="5"
                ></el-input-number>
              </el-form-item>
            </el-col>
            <el-col :span="8">
              <el-form-item label="ë‚˜ì´" prop="age" style="width:100%">
                <el-input-number
                  v-model="ruleForm.age"
                  :step="5"
                ></el-input-number>
              </el-form-item>
            </el-col>
            <el-col :span="8">
              <el-form-item label="ê²°í˜¼ì—¬ë¶€" prop="gender">
                <el-radio-group v-model="ruleForm.gender">
                  <el-radio label="O" border></el-radio>
                  <el-radio label="X" border></el-radio>
                </el-radio-group>
              </el-form-item>
            </el-col>
          </el-row>
          <el-row
            class="mt-5"
            style=" display: flex;
  justify-content: center;"
          >
            <el-button type="primary" @click="submitForm('ruleForm')"
              >ì‘ì„±</el-button
            >
            <el-button @click="resetForm('ruleForm')">ì´ˆê¸°í™”</el-button>
          </el-row>
        </el-form>
      </div>
    </el-card>
  </div>
</template>

<script>
import $axios from "axios";
import BreadCrumb from "./components/bread-crumb.vue";
import { computed, reactive, onMounted } from "vue";
import { useStore } from "vuex";
import { useRouter } from "vue-router";
import { createToast } from "mosha-vue-toastify";
import "mosha-vue-toastify/dist/style.css";

export default {
  name: "AdoptForm",
  components: {
    BreadCrumb
  },
  data() {
    return {
      ruleForm: {
        type: "",
        title: this.state.board.title,
        dogName: this.state.board.dogName,
        email: "",
        name: "",
        gender: "",
        hair: "",
        color: "",
        age: 25,
        size: "",
        neutralization: "",
        address: "",
        desc: "",
        energy: "",
        obedience: "",
        relationship: "",
        adaptability: "",
        disabled: false,
        dialogImageUrl: "",
        dialogVisible: false,
        disabled: false
      },
      rules: {
        type: [
          {
            required: true,
            message: "ê³µê³  íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        name: [
          { required: true, message: "ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", trigger: "blur" },
          {
            min: 1,
            max: 10,
            message: "10ê¸€ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.",
            trigger: "blur"
          }
        ],
        gender: [
          { required: true, message: "ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”", trigger: "blur" }
        ],
        hair: [
          {
            required: true,
            message: "í—¤ì–´íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        color: [
          {
            required: true,
            message: "ì»¬ëŸ¬íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        age: [
          { required: true, message: "ì—°ë ¹ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”", trigger: "blur" }
        ],
        size: [
          { required: true, message: "í¬ê¸°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”", trigger: "blur" }
        ],
        neutralization: [
          {
            required: true,
            message: "ì¤‘ì„±í™”ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        address: [
          {
            required: true,
            message: "í˜„ì¬ ê°•ì•„ì§€ì˜ ìœ„ì¹˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
            trigger: "blur"
          },
          {
            min: 3,
            max: 20,
            message: "3ê¸€ì ì´ìƒ, 20ê¸€ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.",
            trigger: "blur"
          }
        ],
        desc: [
          {
            required: true,
            message: "ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (ì†Œê°œê¸€, íŠ¹ì´ì‚¬í•­ ë“±)",
            trigger: "blur"
          },
          {
            min: 50,
            max: 1000,
            message: "50ê¸€ì ì´ìƒ, 1000ê¸€ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.",
            trigger: "blur"
          }
        ],
        energy: [
          {
            required: true,
            message: "í™œë™ì„±í–¥ì„ ê´€ì°° í›„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        obedience: [
          {
            required: true,
            message: "ìˆœì¢…ì„±í–¥ì„ ê´€ì°° í›„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        relationship: [
          {
            required: true,
            message: "ê´€ê³„ì„±í–¥ì„ ê´€ì°° í›„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ],
        adaptability: [
          {
            required: true,
            message: "ì ì‘ì„±í–¥ì„ ê´€ì°° í›„ ì„ íƒí•´ì£¼ì„¸ìš”",
            trigger: "blur"
          }
        ]
      }
    };
  },

  methods: {
    submitForm(formName) {
      const mbti =
        [this.ruleForm.energy == "ì—ë„ˆì§€ìˆëŠ”" ? "E" : "I"] +
        [this.ruleForm.obedience == "ì¶©ì„±ì‹¬ ê°•í•œ" ? "S" : "N"] +
        [this.ruleForm.relationship == "ì˜ì¡´ì ì¸" ? "F" : "T"] +
        [this.ruleForm.adaptability == "ì¹œí™”ì ì¸" ? "J" : "P"];

      const data = {
        thumbnailUrl: "",
        filePath: [],
        email: "",
        dogName: this.ruleForm.name,
        boardType: Number(this.ruleForm.type.id),
        userId: this.state.userId.userId,
        mbti: mbti,
        title: this.ruleForm.title,
        description: this.ruleForm.desc,
        colorType: Number(this.ruleForm.color.id),
        hairType: this.ruleForm.hair == "ë‹¨ëª¨" ? 10 : 11,
        gender: this.ruleForm.gender == "ì—¬" ? 8 : 9,
        age: Number(this.ruleForm.age.id),
        neutralization:
          this.ruleForm.neutralization == "ì¤‘ì„±í™” O" ? true : false,
        weight: Number(this.ruleForm.size.id),
        address: this.ruleForm.address
      };
      console.log(data);

      this.$refs[formName].validate(valid => {
        if (valid) {
          this.registerData(data);
          console.log(this.ruleForm);
        } else {
          console.log("error submit!!");
          return false;
        }
      });
    },
    resetForm(formName) {
      this.$refs[formName].resetFields();
    },
    handleRemove(file) {
      console.log(file);
    },
    handlePictureCardPreview(file) {
      this.dialogImageUrl = file.url;
      this.dialogVisible = true;
    },
    handleDownload(file) {
      console.log(file);
    }
  },

  setup() {
    const store = new useStore();
    const router = new useRouter();

    const state = reactive({
      board: computed(() => {
        console.log(store.getters["root/getBoardDetail"]);
        return store.getters["root/getBoardDetail"];
      }),
      userId: computed(() => {
        return store.getters["root/getLoginUserInfo"];
      })
    });

    const registerData = function(data) {
      store
        .dispatch("root/requestRegisterBoard", data)
        .then(function(result) {
          createToast("ê³µê³ ê°€ ë“±ë¡ë˜ì—ˆì–´ìš” ğŸ“œğŸ¾", {
            hideProgressBar: "true",
            timeout: 4500,
            showIcon: "true",
            toastBackgroundColor: "#7eaa72",
            position: "bottom-right",
            transition: "bounce",
            type: "success"
          });
          console.log("ë“±ë¡ ì„±ê³µ");
          router.push({ name: "Adopt" });
        })
        .catch(function(err) {
          createToast("ê³µê³  ë“±ë¡ì— ì‹¤íŒ¨í–ˆì–´ìš” ğŸ’¬ğŸ’¦", {
            hideProgressBar: "true",
            timeout: 4500,
            showIcon: "true",
            toastBackgroundColor: "#c49d83",
            position: "bottom-right",
            transition: "bounce",
            type: "warning"
          });
          console.log(err);
        });
    };

    onMounted(() => {
      console.log("breadcrumb");
      store.commit("root/setBreadcrumbInfo", {
        isHome: false,
        title: "ì…ì–‘/ì„ë³´ ìƒë‹´",
        subTitle: "ì…ì–‘/ì„ë³´ ì‹ ì²­ì„œ ì‘ì„±"
      });
    });

    return { state, registerData };
  }
};
</script>

<style scoped>
:deep(.el-radio__inner:hover) {
  border-color: #755744;
  color: #755744;
}

:deep(.el-radio.is-bordered.is-checked) {
  border-color: #755744;
  background-color: #f9f0e7;
  color: #755744;
  font-weight: 600;
}

li.el-select-dropdown__item.selected {
  color: #755744;
  font-weight: 700;
}

:deep(.el-radio__inner) {
  display: none;
}
:deep(.el-radio__input.is-checked + .el-radio__label) {
  border-color: #755744;
  color: #755744;
}

:deep(.el-radio__input.is-checked .el-radio__inner) {
  border-color: #755744;
  background-color: #754444;
  background: #755744;
}

:deep(.el-radio) {
  margin-left: 0px;
  margin-right: 0px;
}

:deep(.el-button) {
  font-weight: 600;
}
:deep(.el-button:hover) {
  color: #f9f0e7;
  border-color: #755744;
  background-color: #755744;
}

:deep(.el-input__inner:focus) {
  border: 1px solid #755744;
}

:deep(.el-textarea__inner:focus) {
  border: 1px solid #755744;
}

:deep(.el-radio-button__inner:hover) {
  color: #d7aea4;
}

:deep(.el-button--primary) {
  color: #755744;
  border-color: #f9f0e7;
  background-color: #f9f0e7;
}
:deep(.el-radio-button__orig-radio:checked + .el-radio-button__inner) {
  border-color: #755744;
  background-color: #755744;
  box-shadow: -1px 0 0 0 #755744;
}

:deep(.el-select-dropdown__item.selected) {
  color: #755744;
}
:deep(.el-select .el-input.is-focus .el-input__inner) {
  border-color: #755744;
}
:deep(.el-switch.is-checked .el-switch__core) {
  border-color: #755744;
  background-color: #755744;
}

:deep(.el-form-item__label) {
  font-size: 12pt;
  font-weight: 500;
}

.box {
  margin-top: 30px;
  margin-bottom: 40px;
  padding: 40px;
  background-color: #faf4ef;
}
</style>
