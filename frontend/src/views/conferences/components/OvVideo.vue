<template>
  <video ref="video" autoplay />
</template>

<style scoped>
.auto {
  width: auto;
}
.full {
  width: 99%;
}
</style>
<script>
import { ref, onMounted, reactive, computed, onBeforeMount } from 'vue'

export default {
	name: 'OvVideo',

	props: {
		streamManager: Object,
    spanEachVideo: Number,
    videoStyle: String,
	},

	setup(props) {
		const video = ref(null)
    const state = reactive({
      videoStyle: '',
    })

    onBeforeMount(() => {
      console.log("ë¶€ëª¨ì—ì„œ ë„˜ì–´ì˜¨ ê°’ ğŸ”½ ")
      console.log(props.spanEachVideo)
      if(props.spanEachVideo == 1) state.videoStyle='auto';
      else state.videoStyle='99%';
      console.log('OvVide > videoStyle ê°’ ğŸ”½')
      console.log(state.videoStyle)
    })
    onMounted(() => {
			console.log('openVidu ë¹„ë””ì˜¤ ê·¸ ìì²´ ì‹¤í–‰â—')
			console.log(props.streamManager)

      console.log('ë¹„ë””ì˜¤ í¬ê¸° ì¡°ì ˆ ğŸ”½')
      console.log(props.spanEachVideo)
      state.spanEachVideo = props.spanEachVideo
      if(state.spanEachVideo == 1) {
        console.log('ì‚¬ìš©ì í•œëª…!')
        state.widthComponent=true;
      }
      else {
        console.log('ì‚¬ìš©ì ë‘ ëª…~!')
        state.widthComponent=false;
      }
      console.log('ë¹„ë””ì˜¤ ì†ì„± : ' + state.widthComponent)

      console.log('video.value ğŸ”½')
			console.log(video.value)

			props.streamManager.addVideoElement(video.value);
		})
		return { state, video }
	}
};
</script>
